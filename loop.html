<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>迴圈</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/chatbot.css">	
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
	<script type="text/javascript" src="js/script.js"></script>	
	<script src="https://alcdn.msauth.net/browser/2.38.1/js/msal-browser.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
	<script>
		document.addEventListener("DOMContentLoaded", (event) => {
			includeHTML(highlightItem);			
			document.getElementById("toggleNav").addEventListener("click", navClick);		
			enableAnswerRevealer();
		});
	</script>
</head>
<body>
    <div class="d-flex">
        <button id="toggleNav" class="btn btn-primary">&#8212;</button>
        <nav id="sidebar" class="bg-light border-end" style="display: block;">
            <div>
                <div w3-include-html="navigation.html"></div>
            </div>
        </nav>
        <main class="flex-grow-1">
            <header>
                <h1>迴圈 (Loop)</h1>
            </header>
            <section>
                <h2>學習導覽</h2>
                <p>迴圈是程式語言中重複執行特定程式碼區塊的機制。本章節將深入介紹 Python 中兩種主要的迴圈結構：`for` 迴圈和 `while` 迴圈。</p>
                <ul>
                    <li>**`for` 迴圈**：用於遍歷序列（如列表、字串、元組）中的元素，或執行固定次數的重複操作。</li>
                    <li>**`while` 迴圈**：只要給定的條件保持為 `True`，就會持續執行。</li>
                    <li>**控制語句**：學習 `break`、`continue` 和 `else` 語句來控制迴圈的流程。</li>
                </ul>
            </section>

            <section>
                <h2>`for` 迴圈</h2>
                <p>`for` 迴圈用於迭代（Iterate）任何可迭代（Iterable）的項目，例如列表或字串。</p>
                
                <h3>遍歷列表</h3>
                <pre class="line-numbers"><code class="language-python"># 遍歷列表中的元素
fruits = ["apple", "banana", "cherry"]
for x in fruits:
  print(x)</code></pre>

                <h3>使用 `range()` 函式進行計數</h3>
                <p>當你需要執行固定次數的重複操作時，`range()` 函式非常實用。</p>
                <pre class="line-numbers"><code class="language-python"># 從 0 數到 4 (不包含 5)
for i in range(5):
  print(i)

# 從 2 數到 5 (不包含 6)
for j in range(2, 6):
  print(j) 

# 從 0 數到 10，間隔為 2
for k in range(0, 11, 2):
  print(k)</code></pre>
            </section>

            <section>
                <h2>`while` 迴圈</h2>
                <p>`while` 迴圈會持續執行，直到其條件表達式變為 `False`。</p>
                <p class="alert alert-warning"><strong>注意：</strong>使用 `while` 迴圈時，請確保迴圈內有改變條件的語句，否則可能導致**無限迴圈**。</p>
                <pre class="line-numbers"><code class="language-python">i = 1
while i < 6:
  print(i)
  i += 1  # 每次迴圈後增加 i 的值，以避免無限迴圈</code></pre>
            </section>

            <section>
                <h2>迴圈控制語句</h2>
                <p>Python 提供了三種重要的語句來控制迴圈的執行：</p>
                
                <h3>1. `break`：中斷迴圈</h3>
                <p>當 `break` 被執行時，它會立即終止當前的迴圈，並跳到迴圈後面的程式碼繼續執行。</p>
                <pre class="line-numbers"><code class="language-python">for i in range(10):
  if i == 5:
    break
  print(i) # 輸出 0, 1, 2, 3, 4</code></pre>

                <h3>2. `continue`：跳過當前迭代</h3>
                <p>當 `continue` 被執行時，它會立即跳過當前迴圈的剩餘程式碼，進入下一次迭代。</p>
                <pre class="line-numbers"><code class="language-python">for i in range(5):
  if i == 2:
    continue
  print(i) # 輸出 0, 1, 3, 4 (跳過 2)</code></pre>

                <h3>3. `else` 語句 (針對迴圈)</h3>
                <p>在 `for` 或 `while` 迴圈中，`else` 區塊只有在迴圈**正常完成**（沒有被 `break` 語句中斷）時才會執行。</p>
                <pre class="line-numbers"><code class="language-python">for i in range(3):
  print(i)
else:
  print("迴圈正常結束") # 會被執行

for j in range(3):
  if j == 1:
    break
  print(j)
else:
  print("迴圈被中斷，此句不會執行") # 不會被執行</code></pre>
            </section>

            <section>
                <h2>挑戰題目</h2>

                <div class="challenge-item" id="challenge-1">
                    <h3 class="caption">挑戰 1：奇數計數 <span class="icon">🛈</span></h3>
                    <p>使用 **`for` 迴圈**和 **`range()`**，輸出 1 到 20 之間（包含 1 和 20）的所有**奇數**。</p>
                    <div class="answer">
                        <pre class="line-numbers"><code class="language-python"># 解答
for i in range(1, 21, 2):
    print(i)

# 或者使用 if 判斷
# for i in range(1, 21):
#     if i % 2 != 0:
#         print(i)</code></pre>
                    </div>
                    <button class="chatbot-toggle-btn" onclick="openChatbot(this)">
                        💬 需要引導？找學習助手
                    </button>
                </div>

                <div class="challenge-item" id="challenge-2">
                    <h3 class="caption">挑戰 2：計算總和 <span class="icon">🛈</span></h3>
                    <p>使用 **`for` 迴圈**，計算列表 `numbers = [10, 20, 30, 40, 50]` 中所有元素的總和，並輸出結果。</p>
                    <div class="answer">
                        <pre class="line-numbers"><code class="language-python"># 解答
numbers = [10, 20, 30, 40, 50]
total = 0
for num in numbers:
    total += num  # total = total + num
print(f"總和：{total}")</code></pre>
                    </div>
                    <button class="chatbot-toggle-btn" onclick="openChatbot(this)">
                        💬 需要引導？找學習助手
                    </button>
                </div>

                <div class="challenge-item" id="challenge-3">
                    <h3 class="caption">挑戰 3：密碼嘗試 <span class="icon">🛈</span></h3>
                    <p>使用 **`while` 迴圈**，要求使用者不斷輸入密碼，直到輸入正確的密碼 `"1234"` 為止。輸入正確後，輸出「密碼正確，歡迎登入！」並結束迴圈。</p>
                    <div class="answer">
                        <pre class="line-numbers"><code class="language-python"># 解答
password = ""
correct_password = "1234"

while password != correct_password:
    # 假設 input 函數在實際環境中可用
    # 這裡用一個假設的 input 替代，因為 HTML 環境不能實際執行 Python 的 input
    password = input("請輸入密碼：") 
    
    if password == correct_password:
        print("密碼正確，歡迎登入！")
    else:
        print("密碼錯誤，請重新輸入。")</code></pre>
                    </div>
                    <button class="chatbot-toggle-btn" onclick="openChatbot(this)">
                        💬 需要引導？找學習助手
                    </button>
                </div>

                <div class="challenge-item" id="challenge-4">
                    <h3 class="caption">挑戰 4：`continue` 的使用 <span class="icon">🛈</span></h3>
                    <p>使用 **`for` 迴圈**，輸出 1 到 10 之間（包含 1 和 10）的所有數字，但要使用 **`continue`** 語句跳過所有**偶數**。</p>
                    <div class="answer">
                        <pre class="line-numbers"><code class="language-python"># 解答
for i in range(1, 11):
    # 如果是偶數 (i 除以 2 餘數為 0)，則跳過本次迭代
    if i % 2 == 0:
        continue
    print(i)</code></pre>
                    </div>
                    <button class="chatbot-toggle-btn" onclick="openChatbot(this)">
                        💬 需要引導？找學習助手
                    </button>
                </div>

                <div class="challenge-item" id="challenge-5">
                    <h3 class="caption">挑戰 5：尋找與中斷 <span class="icon">🛈</span></h3>
                    <p>給定列表 `items = ["pen", "book", "pencil", "eraser"]`。使用 **`for` 迴圈**和 **`break`**，尋找第一個出現的 `"pencil"`，並在找到後立刻輸出「找到鉛筆了！」然後停止迴圈。如果迴圈正常結束（即沒有找到），則輸出「列表中沒有鉛筆」。</p>
                    <div class="answer">
                        <pre class="line-numbers"><code class="language-python"># 解答
items = ["pen", "book", "pencil", "eraser"]
found = False
for item in items:
    if item == "pencil":
        print("找到鉛筆了！")
        found = True
        break
        
if not found:
    print("列表中沒有鉛筆")

# 使用 for/else 寫法會更簡潔
print("\n--- 使用 for/else ---")
for item in items:
    if item == "pencil":
        print("找到鉛筆了！")
        break
else:
    # 只有當 for 迴圈沒有被 break 時才會執行
    print("列表中沒有鉛筆")</code></pre>
                    </div>
                    <button class="chatbot-toggle-btn" onclick="openChatbot(this)">
                        💬 需要引導？找學習助手
                    </button>
                </div>
				
                <div class="challenge-item" id="challenge-6">
                    <h3 class="caption">挑戰 6：巢狀迴圈：九九乘法表 <span class="icon">🛈</span></h3>
                    <p>使用**巢狀 `for` 迴圈**，輸出一個完整的九九乘法表（不需排版，每行輸出一個算式即可）。</p>
                    <div class="answer">
                        <pre class="line-numbers"><code class="language-python"># 解答
for i in range(1, 10):
    for j in range(1, 10):
        result = i * j
        print(f"{i} x {j} = {result}")</code></pre>
                    </div>
                    <button class="chatbot-toggle-btn" onclick="openChatbot(this)">
                        💬 需要引導？找學習助手
                    </button>
                </div>
				
                <div class="challenge-item" id="challenge-7">
                    <h3 class="caption">挑戰 7：從後向前遍歷 <span class="icon">🛈</span></h3>
                    <p>使用 **`for` 迴圈**，遍歷列表 `letters = ['A', 'B', 'C', 'D']` 並依序輸出，然後使用 **`range()`** 函式從後向前倒序輸出索引和元素。</p>
                    <div class="answer">
                        <pre class="line-numbers"><code class="language-python"># 解答
letters = ['A', 'B', 'C', 'D']

print("--- 依序輸出 ---")
for letter in letters:
    print(letter)

print("\n--- 倒序輸出（使用 range() 和索引）---")
# len(letters) - 1 是最後一個索引 (3)
# -1 是迴圈終止條件 (不包含 -1)
# -1 是步長 (每次減 1)
for i in range(len(letters) - 1, -1, -1):
    print(f"索引 {i}: {letters[i]}")

# 也可以使用 reversed()
# print("\n--- 倒序輸出（使用 reversed()）---")
# for letter in reversed(letters):
#     print(letter)</code></pre>
                    </div>
                    <button class="chatbot-toggle-btn" onclick="openChatbot(this)">
                        💬 需要引導？找學習助手
                    </button>
                </div>

            </section>

            <section>
                <h2>結語</h2>
                <p>迴圈是程式設計中自動化和處理重複任務的基石。掌握 `for` 和 `while` 迴圈，以及 `break`、`continue` 和 `else` 等控制語句，將能讓你撰寫出強大而靈活的程式碼。</p>
            </section>
        </main>
		
		<div id="chatbot-container" class="chatbot-docked chatbot-docked-right" style="display: none;">
			<div class="chatbot-window">
				<div class="chatbot-header">
					<div class="chatbot-header-left">
						<span class="chatbot-title" id="chatbot-title">🤖 Python 學習助手</span>
						
					</div>
					<div class="chatbot-header-right">
						<button class="chatbot-jump-btn" id="chatbot-jump-btn" onclick="jumpToChallenge()" title="跳轉到挑戰位置">🚩</button>
						<button class="chatbot-dock-btn" id="dock-right-btn" onclick="dockChatbot('right')" title="停靠右側">
							▷
						</button>
						<button class="chatbot-dock-btn" id="dock-bottom-btn" onclick="dockChatbot('bottom')" title="停靠底部">
							▽
						</button>
						<button class="chatbot-close" onclick="closeChatbot()">✕</button>
					</div>
				</div>
								
				<div class="chatbot-resizer" id="chatbot-resizer"></div>
				
				<div class="chatbot-messages" id="chatbot-messages"></div>
				<div class="chatbot-input">
					<textarea 
						id="chatbot-input" 
						placeholder="輸入你的回答或問題...（Shift+Enter 換行，Enter 發送）" 
						onkeydown="handleKeyPress(event)"
						rows="1"></textarea>
					<button id="chatbot-send-btn" onclick="sendMessage()">發送</button>
					<button id="chatbot-summary-btn" onclick="generateSummary()">📊</button>
				</div>
			</div>
		</div>

		<script src="js/auth.js"></script>
		<script src="js/chatbot.js"></script>
		
    </div>
</body>
</html>